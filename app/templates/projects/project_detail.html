{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb breadcrumb-pandora">
        <li class="breadcrumb-item"><a href="{{ url_for('projects.project_list') }}">Projects</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ project.name }}</li>
      </ol>
    </nav>
    <div>
        <a href="{{ url_for('projects.edit_project', project_id=project._id) }}" class="btn btn-sm btn-pandora-secondary me-2">
             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square me-1" viewBox="0 0 16 16">
               <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
               <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
             </svg>
            Edit Project
        </a>
         <form action="{{ url_for('projects.delete_project', project_id=project._id) }}" method="POST" class="d-inline" onsubmit="return confirm('Are you absolutely sure you want to delete the project \'{{ project.name }}\' and all its tasks? This cannot be undone.');">
             <button type="submit" class="btn btn-sm btn-danger">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill me-1" viewBox="0 0 16 16">
                  <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"/>
                </svg>
                Delete Project
             </button>
         </form>
    </div>
</div>

<h1 class="mb-3 project-detail-title">{{ project.name }}</h1>
<p class="lead project-status mb-3">Status: <span class="badge rounded-pill status-badge status-{{ project.status|lower|replace(' ', '-') }}">{{ project.status }}</span></p>
{% if project.due_date %}
<p><strong>Due Date:</strong> {{ project.due_date.strftime('%Y-%m-%d') }}</p>
{% endif %}

<div class="project-description mb-4">
    <strong>Description:</strong>
    <p>{{ project.description if project.description else 'No description provided.' }}</p>
</div>


<hr class="hr-pandora">

<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="task-list-title">Tasks ({{ tasks|length }})</h2>
    <a href="{{ url_for('projects.new_task', project_id=project._id) }}" class="btn btn-pandora">
         <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-1" viewBox="0 0 16 16">
           <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
         </svg>
        Add Task
    </a>
</div>

{% if tasks %}
<div class="list-group task-list-pandora">
    {% for task in tasks %}
        {% include 'tasks/_task_item.html' %} {# Include the partial template #}
    {% endfor %}
</div>
{% else %}
<p class="text-center fst-italic mt-4">No tasks have been added to this project yet.</p>
{% endif %}

{% endblock %}